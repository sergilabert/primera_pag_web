<!DOCTYPE html>
<html lang="es">
	<head>
<!-- He utilitzat l'etiqueta meta per donar més informació de la meva pàgina web-->
		<meta charset="utf-8"/>
		<title>Meteorologia</title>
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
		<meta name="description" content="Aquesta és la meva primera pàgina web de l'assignatura WebGis"/>
		<meta name="author" content="Sergi Gilabert, alumne Universitat Rovira i Virgili"/>


<!--Links dels CSS-->

		<link rel="stylesheet" href="css/css_meteorologia.css">

		<link rel="stylesheet" href="css/font.css">

<!--Enllaç que conecta al footer per a que torni a l'inici de la pàgina-->

		<a name="header"></a>

	</head>

	<body>

<!--Primer he realitzat una divisió anomenada "group" on s'inclou tot el body.-->

<!--Desprès tres classes, on la primera ("header") engloba la capçalera amb el títol i el subtítol, la segona ("topnav"),la barra de navegació i dins d'aquesta segona hi ha una tercera on hi ha el logo-->

<div class="group">

				<div class="header">
  					<h1>METEOROLOGIA</h1>
  						<h2>Dades meteorològiques actuals</h2>
				</div> 

				<div class="topnav">
					<div class="logo">
						<a href="index.html"target="blank"><img src="images/logo_transparent.png"></a>
					</div>

					<ul>
						<li><a class="select" href="index.html"target="blank">INICI</a></li>
						<li> <a class="select" href="imatges.html"target="blank">IMATGES</a></li>
						<li> <a class="select" href="mapa.html"target="blank">MAPA</a></li>
						<li> <a class="select" href="#"target="blank">METEOROLOGIA</a></li>
						<li> <a class="select" href="contacte.html"target="blank">CONTACTE</a></li>
			
					</ul>


				</div>

			<h1> Previsió meteorològica a partir del codi postal </h1>

			<input type="text" id="text_cp">

			<input type="button" value="Click" id="the_button">

			<table id="taula-cps">
			<thread>
				<tr>
					<th> Municipi </th>
					<th> Temps </th>
					<th> Temperatura Mínima </th>
					<th> Temperatura Màxima </th>
					<th> Humitat </th>
				</tr>
			</thread>
			<tbody id='dades-taula'>
				<tr>
					<td> mun_prova </td>
					<td> temps_prova </td>
					<td> tmin_prova </td>
					<td> tmax_prova </td>
					<td> hum_prova </td>
				</tr>
			</tbody>
			</table>


<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
	
	<script>

		document
		.getElementById("the_button")
		.addEventListener("click", () => {

			var cp = document.getElementById("text_cp").value;

			var url = 'http://api.openweathermap.org/data/2.5/weather?zip='+cp+',es&appid=d887814b738f4ad3816e2a128cd62790'

			console.log(url);

		fetch(url)
			
		.then(resposta=>resposta.json())
		.then(json=>{


			html="";
			json.weather.forEach( function(element) {console.log(element.main);

				html += "<tr>";
				html +=	"<td> "+element.name+" </td>";
				html +=	"<td> "+element.main+" </td>";
				html +=	"<td> "+element.temp_min+" </td>";
				html +=	"<td> "+element.temp_max+"</td>";
				html +=	"<td> "+element.humidity+" </td>";
				html += "</tr>";

			});

			console.log(html);

				document
				.getElementById("dades-taula")
				.innerHTML=html;


		})

	.catch(error=> console.log(error));


		});

	</script>

<!-- Per últim he realitzat el footer on he inclòs el que es demanava en la pràctica i també ho he classificat per classes-->


			<div class="footer">

				<a href="https://ca-es.facebook.com/"target="blank"class="icon-facebook"></a>
				<a href="https://twitter.com/?lang=ca"target="blank" class="icon-twitter"></a>
				<a href="https://www.instagram.com/"target="blank" class="icon-instagram"></a>
				<a href="https://www.linkedin.com/"target="blank" class="icon-linkedin"></a>

					<p class="copy">&copy; Gilabert Sergi,2021 - Tots els drets reservats</p>

			<div class="top">

				<a href="#header"class="lletra_top">Inici pàgina </a>

			</div>
	
		</div>

		</div>

	</body>
</html>